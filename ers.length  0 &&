[1mdiff --git a/README.md b/README.md[m
[1mindex ef34b96..6fd2539 100644[m
[1m--- a/README.md[m
[1m+++ b/README.md[m
[36m@@ -1,5 +1,3 @@[m
 # Chatter Messaging App[m
 [m
 A simple messaging app I was challenged to make without any backend capabilities.[m
[31m-[m
[31m-Here is the link to the project [Chatter](https://chattc.netlify.com/Auth)[m
[1mdiff --git a/app/components/Auth.js b/app/components/Auth.js[m
[1mindex 63ab967..db2f733 100644[m
[1m--- a/app/components/Auth.js[m
[1m+++ b/app/components/Auth.js[m
[36m@@ -10,14 +10,14 @@[m [mconst AuthPage = styled.div.attrs({[m
   position: relative;[m
   display: flex;[m
   flex-direction: column;[m
[31m-  background: var(--main);[m
[32m+[m[32m  background: ${({ theme }) => theme.main};[m
   align-items: center;[m
[31m-  justify-content: space-around;[m
[32m+[m[32m  justify-content: center;[m
   overflow: hidden;[m
 `;[m
 [m
 const SwitchText = styled(motion.p)`[m
[31m-  color: var(--sub);[m
[32m+[m[32m  color: ${({ theme }) => theme.sub};[m
   text-transform: uppercase;[m
   font-family: var(--font1);[m
   font-size: 1.2rem;[m
[36m@@ -25,6 +25,8 @@[m [mconst SwitchText = styled(motion.p)`[m
   letter-spacing: 0.2rem;[m
   word-spacing: 0.2rem;[m
   font-weight: bolder;[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  bottom: 12px;[m
   margin-bottom: 5px;[m
 `;[m
 [m
[36m@@ -40,8 +42,8 @@[m [mexport default function Auth({ location, setAuth }) {[m
     <AuthPage>[m
       <Form setAuth={setAuth} formType={state} />[m
       <SwitchText[m
[31m-        initial={{ opacity: 0, y: 50 }}[m
[31m-        animate={{ opacity: 1, y: 0 }}[m
[32m+[m[32m        initial={{ opacity: 0, y: 90 }}[m
[32m+[m[32m        animate={{ opacity: 1, y: -10 }}[m
         transition={{ ...spring, delay: 1.9 }}[m
         layoutTransition={spring2}[m
         onClick={() => setState(s => (s === 'login' ? 'sign-up' : 'login'))}>[m
[1mdiff --git a/app/components/BgIcons.js b/app/components/BgIcons.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7033d04[m
[1m--- /dev/null[m
[1m+++ b/app/components/BgIcons.js[m
[36m@@ -0,0 +1,174 @@[m
[32m+[m[32mimport React from 'react';[m
[32m+[m
[32m+[m[32mexport function ChatBubbleCircle({ style }) {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <svg[m
[32m+[m[32m      style={style}[m
[32m+[m[32m      width='76'[m
[32m+[m[32m      height='70'[m
[32m+[m[32m      viewBox='0 0 76 70'[m
[32m+[m[32m      fill='none'[m
[32m+[m[32m      xmlns='http://www.w3.org/2000/svg'>[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M38 17.2266C37.1807 17.2266 36.5156 17.8391 36.5156 18.5938C36.5156 19.3484 37.1807 19.9609 38 19.9609C38.8193 19.9609 39.4844 19.3484 39.4844 18.5938C39.4844 17.8391 38.8193 17.2266 38 17.2266Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M13.3594 41.8359C14.1787 41.8359 14.8438 41.2234 14.8438 40.4688C14.8438 39.7141 14.1787 39.1016 13.3594 39.1016C12.5401 39.1016 11.875 39.7141 11.875 40.4688C11.875 41.2234 12.5401 41.8359 13.3594 41.8359Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M49.875 3.55469C36.5116 3.55469 25.5434 12.0409 24.6951 22.73C11.9684 23.318 0 31.7706 0 43.2031C0 47.9808 2.05261 52.61 5.78906 56.2779C6.52835 59.0849 5.63077 62.0602 3.40363 64.1115C2.97919 64.5024 2.8522 65.0904 3.08182 65.6015C3.31143 66.1121 3.85242 66.4453 4.45312 66.4453C8.68649 66.4453 12.7662 64.9163 15.7976 62.222C18.7507 63.1491 22.6037 63.7109 26.125 63.7109C39.4867 63.7109 50.4537 55.2269 51.3043 44.5399C54.4122 44.4128 57.6448 43.884 60.2024 43.0814C63.2338 45.7757 67.3135 47.3047 71.5469 47.3047C72.1476 47.3047 72.6886 46.9714 72.9182 46.4609C73.1478 45.9498 73.0208 45.3618 72.5964 44.9709C70.3692 42.9195 69.4716 39.9443 70.2109 37.1373C73.9474 33.4694 76 28.8402 76 24.0625C76 12.1835 63.1097 3.55469 49.875 3.55469ZM26.125 60.9766C22.6216 60.9766 18.6295 60.3432 15.9553 59.3632C15.3824 59.1528 14.7278 59.2911 14.3109 59.7103C12.5186 61.5149 10.1883 62.7731 7.64917 63.3515C9.04831 60.8826 9.40549 57.972 8.55429 55.2141C8.48703 54.9967 8.36237 54.798 8.19131 54.6362C4.82364 51.4415 2.96875 47.3811 2.96875 43.2031C2.96875 33.5687 13.5728 25.4297 26.125 25.4297C37.978 25.4297 48.3906 33.0213 48.3906 43.2031C48.3906 53.0036 38.4024 60.9766 26.125 60.9766V60.9766ZM67.8087 35.4956C67.6376 35.658 67.513 35.8566 67.4457 36.0735C66.5945 38.8313 66.9517 41.7419 68.3508 44.2109C65.8117 43.633 63.4814 42.3743 61.6891 40.5697C61.2722 40.151 60.6176 40.0121 60.0447 40.2225C57.7271 41.0717 54.4209 41.6597 51.2997 41.8018C50.8659 36.6315 48.0659 31.7722 43.2788 28.1641H62.6406C63.4605 28.1641 64.125 27.552 64.125 26.7969C64.125 26.0417 63.4605 25.4297 62.6406 25.4297H38.7184C35.349 23.8499 31.5656 22.9287 27.6714 22.7354C28.5244 13.5528 38.1571 6.28906 49.875 6.28906C62.4272 6.28906 73.0312 14.4281 73.0312 24.0625C73.0312 28.2404 71.1764 32.3009 67.8087 35.4956V35.4956Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M38 39.1016H19.2969C18.477 39.1016 17.8125 39.7136 17.8125 40.4688C17.8125 41.2239 18.477 41.8359 19.2969 41.8359H38C38.8199 41.8359 39.4844 41.2239 39.4844 40.4688C39.4844 39.7136 38.8199 39.1016 38 39.1016Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M38 47.3047H13.3594C12.5395 47.3047 11.875 47.9167 11.875 48.6719C11.875 49.427 12.5395 50.0391 13.3594 50.0391H38C38.8199 50.0391 39.4844 49.427 39.4844 48.6719C39.4844 47.9167 38.8199 47.3047 38 47.3047Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M62.6406 17.2266H43.9375C43.1176 17.2266 42.4531 17.8386 42.4531 18.5938C42.4531 19.3489 43.1176 19.9609 43.9375 19.9609H62.6406C63.4605 19.9609 64.125 19.3489 64.125 18.5938C64.125 17.8386 63.4605 17.2266 62.6406 17.2266Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m    </svg>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function ChatRectSingle({ style }) {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <svg[m
[32m+[m[32m      style={style}[m
[32m+[m[32m      width='68'[m
[32m+[m[32m      height='68'[m
[32m+[m[32m      viewBox='0 0 68 68'[m
[32m+[m[32m      fill='none'[m
[32m+[m[32m      xmlns='http://www.w3.org/2000/svg'>[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M59.5 0H8.5C3.81225 0 0 3.81225 0 8.5V46.75C0 51.4378 3.81225 55.25 8.5 55.25H22.3805L32.368 67.235C32.7675 67.7152 33.3582 67.9957 33.9787 68C33.9872 68 33.9957 68 34 68C34.6162 68 35.2028 67.7323 35.6065 67.269L46.0233 55.25H59.5C64.1878 55.25 68 51.4378 68 46.75V8.5C68 3.81225 64.1878 0 59.5 0ZM63.75 46.75C63.75 49.0917 61.8417 51 59.5 51H45.05C44.4338 51 43.8473 51.2677 43.4435 51.731L34.0297 62.594L25.007 51.765C24.6032 51.2805 24.004 51 23.375 51H8.5C6.15825 51 4.25 49.0917 4.25 46.75V8.5C4.25 6.15825 6.15825 4.25 8.5 4.25H59.5C61.8417 4.25 63.75 6.15825 63.75 8.5V46.75Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M36.125 29.75H19.125C17.952 29.75 17 30.702 17 31.875C17 33.048 17.952 34 19.125 34H36.125C37.298 34 38.25 33.048 38.25 31.875C38.25 30.702 37.298 29.75 36.125 29.75Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M48.875 17H19.125C17.952 17 17 17.952 17 19.125C17 20.298 17.952 21.25 19.125 21.25H48.875C50.048 21.25 51 20.298 51 19.125C51 17.952 50.048 17 48.875 17Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m    </svg>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function ChatBubbleCircleNoText({ style }) {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <svg[m
[32m+[m[32m      style={style}[m
[32m+[m[32m      width='77'[m
[32m+[m[32m      height='77'[m
[32m+[m[32m      viewBox='0 0 77 77'[m
[32m+[m[32m      fill='none'[m
[32m+[m[32m      xmlns='http://www.w3.org/2000/svg'>[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M1.68616 29.6082C2.49274 29.8038 3.30579 29.3085 3.502 28.5014C5.8407 18.8546 16.8133 11.5801 29.0255 11.5801C42.6993 11.5801 55.0431 20.4026 55.0431 32.6348C55.0431 45.0432 42.0919 53.6895 29.0255 53.6895C23.954 53.6895 18.8971 52.4182 15.441 50.6899C14.9805 50.4596 14.4347 50.4807 13.9935 50.7463L7.56549 54.6106L10.0293 48.4422C10.2625 47.8583 10.1074 47.1909 9.64158 46.7691C7.2653 44.619 5.48763 42.1399 4.35794 39.4006C4.04071 38.6328 3.16186 38.2674 2.39405 38.584C1.62623 38.9006 1.26024 39.7801 1.57689 40.5479C2.75299 43.3983 4.52654 45.9943 6.85642 48.2772L3.11545 57.6431C2.87577 58.2429 3.04555 58.9285 3.53725 59.3467C4.03013 59.7656 4.73392 59.822 5.28672 59.4901L14.8506 53.7406C17.6111 54.9995 21.0431 55.9512 24.4674 56.4053C29.8104 62.1636 38.5806 65.7207 47.5236 65.7207C52.4865 65.7207 57.6003 64.6492 61.7002 62.7652L71.2624 68.5135C71.8146 68.8454 72.5184 68.7896 73.0118 68.3702C73.5036 67.9519 73.6733 67.2663 73.4336 66.6665L69.6939 57.3035C74.4135 52.7266 77.0001 47.2062 77.0001 41.6582C77.0001 28.9913 64.8661 19.6013 52.0224 17.8812C46.7146 12.1258 37.972 8.57227 29.0255 8.57227C16.0673 8.57227 3.40507 16.1341 0.578787 27.7923C0.383162 28.5995 0.878981 29.4125 1.68616 29.6082V29.6082ZM73.9923 41.6582C73.9923 46.6393 71.4762 51.6592 66.9075 55.7926C66.4411 56.2144 66.2866 56.8817 66.5198 57.4657L68.9836 63.634L62.5556 59.7697C62.1144 59.5048 61.5686 59.4836 61.1081 59.7133C57.2954 61.6196 52.3443 62.7129 47.5236 62.7129C40.7014 62.7129 34.019 60.467 29.217 56.6955C44.0816 56.6138 58.0509 46.5582 58.0509 32.6348C58.0509 28.6899 56.9224 24.8814 54.7623 21.4465C65.7949 24.0919 73.9923 32.4615 73.9923 41.6582V41.6582Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m      <path[m
[32m+[m[32m        d='M3.00781 34.1387C3.00781 34.9693 2.33458 35.6426 1.50391 35.6426C0.673233 35.6426 0 34.9693 0 34.1387C0 33.308 0.673233 32.6348 1.50391 32.6348C2.33458 32.6348 3.00781 33.308 3.00781 34.1387Z'[m
[32m+[m[32m        fill='#5E0BDC'[m
[32m+[m[32m      />[m
[32m+[m[32m    </svg>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function ChatRectangleLayered({ style }) {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <svg[m
[32m+[m[32m      style={style}[m
[32m+[m[32m      width='73'[m
[32m+[m[32m      height='73'[m
[32m+[m[32m      viewBox='0 0 73 73'[m
[32m+[m[32m      fill='none'[m
[32m+[m[32m      xmlns='http://www.w3.org/2000/svg'>[m
[32m+[m[32m      <g clipPath='url(#clip0)'>[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M66.9167 10.95H63.2667V9.73333C63.2625 6.37502 60.5416 3.65415 57.1833 3.64999H6.08333C2.72502 3.65415 0.00415854 6.37502 0 9.73333V41.3667C0.00415854 44.725 2.72502 47.4458 6.08333 47.45H9.73333V60.8333C9.73333 61.3454 10.0541 61.8023 10.5359 61.9769C11.0171 62.151 11.5566 62.0054 11.8845 61.6122L17.6025 54.75H49.3124L61.1143 68.9122C61.3454 69.1896 61.6888 69.35 62.05 69.35C62.1914 69.3494 62.3316 69.325 62.4647 69.2769C62.9459 69.1023 63.2667 68.6454 63.2667 68.1333V54.75H66.9167C70.275 54.7458 72.9958 52.025 73 48.6667V17.0333C72.9958 13.675 70.275 10.9542 66.9167 10.95V10.95ZM10.95 45.0167H6.08333C4.06764 45.0167 2.43333 43.3824 2.43333 41.3667V9.73333C2.43333 7.71763 4.06764 6.08333 6.08333 6.08333H57.1833C59.199 6.08333 60.8333 7.71763 60.8333 9.73333V41.3667C60.8333 43.3824 59.199 45.0167 57.1833 45.0167H23.1167C22.7555 45.0167 22.4133 45.1771 22.1822 45.4545L12.1667 57.4726V46.2333C12.1667 45.5614 11.6219 45.0167 10.95 45.0167ZM70.5667 48.6667C70.5667 50.6824 68.9324 52.3167 66.9167 52.3167H62.05C61.3781 52.3167 60.8333 52.8614 60.8333 53.5333V64.7726L50.819 52.7545C50.5879 52.4771 50.2445 52.3167 49.8833 52.3167H19.6306L23.6858 47.45H57.1833C60.5416 47.4458 63.2625 44.725 63.2667 41.3667V13.3833H66.9167C68.9324 13.3833 70.5667 15.0176 70.5667 17.0333V48.6667Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M9.73328 13.3833H12.1666V15.8167H9.73328V13.3833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path d='M14.6 13.3833H17.0333V15.8167H14.6V13.3833Z' fill='#5E0BDC' />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M19.4667 13.3833H53.5333V15.8167H19.4667V13.3833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M9.73328 20.6833H43.7999V23.1167H9.73328V20.6833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M46.2334 20.6833H48.6667V23.1167H46.2334V20.6833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M51.1001 20.6833H53.5334V23.1167H51.1001V20.6833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M9.73328 27.9833H53.5333V30.4166H9.73328V27.9833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M9.73328 35.2833H31.6333V37.7166H9.73328V35.2833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M34.0667 35.2833H36.5V37.7166H34.0667V35.2833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path[m
[32m+[m[32m          d='M38.9333 35.2833H41.3667V37.7166H38.9333V35.2833Z'[m
[32m+[m[32m          fill='#5E0BDC'[m
[32m+[m[32m        />[m
[32m+[m[32m        <path d='M43.8 35.2833H53.5334V37.7166H43.8V35.2833Z' fill='#5E0BDC' />[m
[32m+[m[32m      </g>[m
[32m+[m[32m      <defs>[m
[32m+[m[32m        <clipPath id='clip0'>[m
[32m+[m[32m          <rect width='73' height='73' fill='white' />[m
[32m+[m[32m        </clipPath>[m
[32m+[m[32m      </defs>[m
[32m+[m[32m    </svg>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst iconsArr = [[m
[32m+[m[32m  ChatBubbleCircle,[m
[32m+[m[32m  ChatBubbleCircle,[m
[32m+[m[32m  ChatRectSingle,[m
[32m+[m[32m  ChatRectSingle,[m
[32m+[m[32m  ChatRectSingle,[m
[32m+[m[32m  ChatRectSingle,[m[41m [m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatRectangleLayered,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m  ChatBubbleCircleNoText,[m
[32m+[m[32m];[m
[32m+[m
[32m+[m[32mexport default iconsArr;[m
[1mdiff --git a/app/components/ChatArea.js b/app/components/ChatArea.js[m
[1mindex b649cee..b4d8473 100644[m
[1m--- a/app/components/ChatArea.js[m
[1m+++ b/app/components/ChatArea.js[m
[36m@@ -2,118 +2,92 @@[m [mimport React from 'react';[m
 import Input from './Input';[m
 import styled from 'styled-components';[m
 import MessageArea from './Messages';[m
[31m-import { AuthContext } from '../context/Context';[m
[32m+[m[32mimport { randomID } from '../utils/helper';[m
[32m+[m[32mimport { ChatContext } from '../context/Context';[m
[32m+[m[32mimport { extractNeededMessageData } from '../utils/chatFunctions';[m
 [m
 const ChatAreaWrapper = styled.div`[m
[31m-  background: var(--main);[m
[32m+[m[32m  background: ${({ theme }) => theme.darkMain};[m
   height: 100%;[m
   flex-grow: 1;[m
[31m-  margin-top: 15px;[m
   overflow: hidden;[m
   position: relative;[m
   display: flex;[m
   flex-direction: column;[m
[32m+[m[32m  padding-bottom: 8px;[m
 `;[m
 [m
 export default function ChatArea() {[m
[31m-  const { user, authed, color } = React.useContext(AuthContext);[m
[31m-  const chatUser = React.useRef({ id: user, color });[m
[31m-[m
[31m-  const [state, setState] = React.useState({[m
[31m-    messages: JSON.parse(localStorage.getItem(`${user}M`)) || [],[m
[31m-    member: chatUser,[m
[31m-  });[m
[31m-[m
[31m-  const [drone, setDrone] = React.useState(() => {[m
[31m-    return new window.Scaledrone('QdpHluDuUEgfYxqm', {[m
[31m-      data: chatUser.current,[m
[31m-    });[m
[31m-  });[m
[31m-[m
[31m-  const [chatErrorState, setChatErrorState] = React.useState({[m
[31m-    errorOccurred: false,[m
[31m-    text: '',[m
[31m-  });[m
[32m+[m[32m  const { sb, chatManager, dispatch } = React.useContext(ChatContext);[m
 [m
   React.useEffect(() => {[m
[31m-    drone.on('open', error => {[m
[31m-      if (error) {[m
[31m-        setChatErrorState({[m
[31m-          errorOccurred: true,[m
[31m-          text: 'Something went wrong, try reloading',[m
[31m-        });[m
[31m-      }[m
[31m-[m
[31m-      const member = { ...chatUser.current };[m
[31m-      member.id = drone.clientId;[m
[31m-[m
[31m-      setState(s => {[m
[31m-        const prevMessages = s.messages;[m
[31m-        return { messages: prevMessages, member };[m
[31m-      });[m
[31m-    });[m
[31m-[m
[31m-    const room = drone.subscribe('observable-room');[m
[31m-    console.log(room);[m
[31m-[m
[31m-    room.on('data', (data, member) => {[m
[31m-      const userMessages = JSON.parse(localStorage.getItem(`${user}M`)) || [];[m
[31m-      console.log(member, data);[m
[31m-      try {[m
[31m-        if (member.id === user || user === member.clientData.id) {[m
[31m-          userMessages.push({ text: data, member: { ...member.clientData } });[m
[31m-          localStorage.setItem(`${user}M`, JSON.stringify(userMessages));[m
[32m+[m[32m    const channelHandler = new sb.ChannelHandler();[m
[32m+[m[32m    const connectionHandler = new sb.ConnectionHandler();[m
[32m+[m
[32m+[m[32m    const HANDLER_ID1 = randomID();[m
[32m+[m[32m    const HANDLER_ID2 = randomID();[m
[32m+[m
[32m+[m[32m    try {[m
[32m+[m[32m      channelHandler.onMessageReceived = (channel, message) => {[m
[32m+[m[32m        if (chatManager !== null && chatManager.hasOwnProperty('userChannel')) {[m
[32m+[m[32m          dispatch({[m
[32m+[m[32m            type: 'New message',[m
[32m+[m[32m            messages: [extractNeededMessageData(message)],[m
[32m+[m[32m          });[m
[32m+[m[32m        } else {[m
[32m+[m[32m          dispatch({[m
[32m+[m[32m            type: 'New channel and message',[m
[32m+[m[32m            channel,[m
[32m+[m[32m            messages: [extractNeededMessageData(message)],[m
[32m+[m[32m          });[m
         }[m
[31m-      } catch (error) {[m
[31m-        console.error(error);[m
[31m-        setChatErrorState({[m
[31m-          errorOccurred: true,[m
[31m-          text: 'Something went wrong, try reloading',[m
[31m-        });[m
[31m-      }[m
[31m-[m
[31m-      setState(s => {[m
[31m-        const { messages, member: Cuser } = s;[m
[31m-        messages.push({ text: data, member });[m
[31m-        return { messages, member: Cuser };[m
[31m-      });[m
[31m-[m
[31m-      document[m
[31m-        .querySelector('.message-area')[m
[31m-        .scrollTo(0, document.querySelector('.message-area').scrollHeight);[m
[31m-    });[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m      connectionHandler.onReconnectStarted = function() {[m
[32m+[m[32m        console.log('reconnecting');[m
[32m+[m[32m      };[m
[32m+[m[32m      connectionHandler.onReconnectSucceeded = function() {[m
[32m+[m[32m        console.log('reconnected');[m
[32m+[m[32